{"version":3,"file":"static/webpack/static/development/pages/tickets.js.8ccfa58d4765b2772071.hot-update.js","sources":["webpack:///./pages/tickets.tsx"],"sourcesContent":["import * as React from 'react';\nimport '../styles/tickets.css';\nimport '../styles/font.css';\nimport Ticket from '../components/Ticket';\nimport Toast from '../components/Toast';\n\nexport default class extends React.Component<any, any> {\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      value: null,\n      data: []\n    }\n  }\n  componentDidMount() {\n    const data = window.localStorage.getItem('tickets');\n    if (data) {\n      this.setState({\n        data: JSON.parse(data)\n      })\n    }\n  }\n  onChange = (e: any) => this.setState({value: e.target.value.length <= 11 ? e.target.value :  this.state.value});\n  onSearch = () => {\n    const pattern = /0?[0-9]{11}/;\n    if (pattern.test(this.state.value)) {\n      fetch(`http://xuncs.cn:2827/ticket/list/${this.state.value}`, {method: 'GET'})\n      .then(res => res.json())\n      .then(res => {\n        if (res.data.data) {\n          window.localStorage.setItem('tickets', JSON.stringify(res.data.data));\n          this.setState({data: res.data.data});\n        }\n      })\n    } else {\n      Toast.fail('请输入11位学号', 1);\n    }\n  }\n  render() {\n    return (\n      <div className=\"tickets\">\n        <div className=\"input-search\" style={{marginBottom: 48}}>\n          <input\n            className=\"input\"\n            type=\"number\"\n            maxLength={11}\n            placeholder=\"请输入学号\"\n            onChange={this.onChange}\n            value={this.state.value} />\n          <span className=\"input-suffix\">\n            <button className=\"button\" onClick={this.onSearch}>\n              <span>Search</span>\n            </button>\n          </span>\n        </div>\n        {!this.state.data.length && <p className=\"tickets-none\">暂无历史纪录</p>}\n        {this.state.data.map((res: any, i: any) => (\n          <Ticket key={i} data={res} />\n        ))}\n       <p className=\"tickets-index\">\n        <a href=\"index\">去订票</a>\n       </p>\n      </div>\n    )\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;AAEA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAeA;AAAA;AAAA;AAAA;AACA;AAhBA;AAiBA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7BA;AACA;AACA;AAFA;AAFA;AAMA;AACA;;;AAAA;AACA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;;;AAiBA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;;;;AA1DA;AACA;;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}