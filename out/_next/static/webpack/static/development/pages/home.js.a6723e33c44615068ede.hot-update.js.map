{"version":3,"file":"static/webpack/static/development/pages/home.js.a6723e33c44615068ede.hot-update.js","sources":["webpack:///./pages/home.tsx"],"sourcesContent":["import * as React from 'react';\nimport Router from 'next/router';\nimport Table from 'antd/lib/table';\nimport Row from 'antd/lib/row';\nimport Col from 'antd/lib/col';\nimport Button from 'antd/lib/button';\nimport { routeRadiosData } from '../components/subscribeData';\nimport '../styles/back.css';\n\n\nexport default class BackPage extends React.Component<any, any> {\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      totalSource: [],\n      totalgaotie: 0,\n      totalplane: 0,\n      totaltrain: 0\n    }\n  }\n  componentDidMount() {\n    let status = window.sessionStorage.getItem('status');\n    if (status !== 'logined') {\n      Router.push({pathname: '/'});\n      window.location.href ='/';\n    }\n    fetch('http://xuncs.cn:2827/back/data')\n    .then(res => res.json())\n    .then((res: any) => {\n\n      this.setState({\n        totalSource: res.data,\n        totalplane: res.data.filter((a) => a.type === 'plane').reduce((a, b) => a.total ? (a.total + b.total) : (a + b.total)),\n        totalgaotie: res.data.filter((a) => a.type === 'gaotie').reduce((a, b) => a.total ? (a.total + b.total) : (a + b.total)),\n        totaltrain: res.data.filter((a) => a.type === 'train').reduce((a, b) =>a.total ? (a.total + b.total) : (a + b.total)),\n      });\n    })\n  }\n\n  render() {\n    const TotalColumns = [{\n      title: '时间',\n      dataIndex: 'date_time',\n      key: 'date_time',\n    }, {\n      title: '终点站',\n      dataIndex: 'type',\n      key: 'type',\n      render: (text: string) => <span>{routeRadiosData.filter(itm => itm.value === text)[0].key}</span>,\n    }, {\n      title: '人数',\n      dataIndex: 'total',\n      key: 'total',\n      render: (text: any) => <span>{text}人</span>\n    }];\n    return (\n      <>\n        <p style={{textAlign: \"center\", fontSize: 24, paddingTop: 64}}>西电寒假送站校车预约助手</p>\n        <div style={{padding: '0 24px 24px 0', textAlign: 'right'}}>\n          <Button onClick={() => Router.push({pathname: '/date'})} type=\"primary\">单日详情</Button>\n        </div>\n        <Row>\n          <Col xs={24} span={12}>\n            <p>\n              <p>火车：{this.state.totaltrain}人</p>\n              <p>高铁：{this.state.totalgaotie}人</p>\n              <p>飞机：{this.state.totalplane}人</p>\n              <p>共计：{this.state.totaltrain + this.state.totalgaotie + this.state.totalplane}</p>\n            </p>\n            <h3 style={{textAlign: 'center'}}>按总日期-时间-终点站的统计表</h3>\n            <Table dataSource={this.state.totalSource} columns={TotalColumns}  pagination={false}/>\n          </Col>\n        </Row>\n      </>\n    )\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAJA;AAFA;AAQA;AACA;;;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAGA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAJA;AAMA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAJA;AAMA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAJA;AAMA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;;;;AAjEA;AACA;AADA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}